<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800;900&display=swap');
        
        @page {
            size: A4 landscape;
            margin: 0;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            width: 297mm;
            height: 210mm;
            background-color: #312e81; /* bg-indigo-900 */
            font-family: 'Inter', sans-serif;
            color: white;
            overflow: hidden;
        }

        .container {
            /* h-full w-full bg-indigo-900 text-white relative overflow-hidden flex shadow-lg */
            width: 100%;
            height: 100%;
            background-color: var(--background-color, #312e81); /* bg-indigo-900 */
            background-image: var(--background-image, none);
            position: relative;
            overflow: hidden;
            display: flex;
            color: white; /* text-white */
            border: var(--border, none);
        }
        
        .blur-overlay {
            /* absolute inset-0 overflow-hidden */
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            pointer-events: none;
        }

        .blur-1 {
            /* absolute -right-24 -top-24 w-96 h-96 bg-white opacity-5 rounded-full blur-3xl */
            position: absolute;
            top: -6rem; right: -6rem;
            width: 24rem; height: 24rem;
            background-color: white;
            opacity: 0.05;
            border-radius: 50%;
            filter: blur(64px); /* blur-3xl */
        }
        
        .blur-2 {
            /* absolute -left-24 -bottom-24 w-96 h-96 bg-indigo-500 opacity-20 rounded-full blur-3xl */
            position: absolute;
            bottom: -6rem; left: -6rem;
            width: 24rem; height: 24rem;
            background-color: #6366f1; /* bg-indigo-500 */
            opacity: 0.2;
            border-radius: 50%;
            filter: blur(64px);
        }

        .sidebar-bar {
            /* w-16 h-full bg-yellow-500 flex flex-col items-center py-8 relative z-10 shadow-lg */
            width: 4rem; /* w-16 */
            height: 100%;
            background-color: #eab308; /* bg-yellow-500 */
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 2rem;
            padding-bottom: 2rem;
            position: relative;
            z-index: 10;
        }

        .vertical-text {
            /* text-indigo-900 font-black text-2xl rotate-90 mt-12 whitespace-nowrap tracking-widest origin-center translate-y-24 */
            color: #312e81;
            font-weight: 900;
            font-size: 1.5rem;
            transform: rotate(90deg) translateY(6rem); /* translate-y-24 approx */
            margin-top: 3rem;
            white-space: nowrap;
            letter-spacing: 0.1em;
            transform-origin: center;
        }

        .content {
            /* flex-1 p-10 flex flex-col justify-center relative z-10 */
            flex: 1;
            padding: 2.5rem; /* p-10 */
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            z-index: 10;
        }

        .header-row {
            /* flex items-center gap-4 mb-4 */
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .logo-box {
            /* bg-white/10 p-2 rounded-lg backdrop-blur-sm */
            background-color: rgba(255, 255, 255, 0.1);
            padding: 0.5rem;
            border-radius: 0.5rem;
        }

        .logo {
            /* h-8 */
            height: 2rem;
            object-fit: contain;
        }

        .star-text {
            /* text-indigo-200 uppercase tracking-widest text-sm font-semibold */
            color: #c7d2fe; /* text-indigo-200 */
            text-transform: uppercase;
            letter-spacing: 0.1em;
            font-size: 0.875rem;
            font-weight: 600;
            margin: 0;
        }

        .congrats {
            /* text-5xl font-bold mb-2 text-white */
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            margin-top: 0;
            color: white;
        }

        .recipient {
            /* text-4xl font-extrabold text-yellow-400 mb-6 */
            font-size: 2.25rem;
            font-weight: 800;
            color: var(--color, #facc15);
            font-family: var(--font-family, inherit);
            font-size: var(--font-size, 2.25rem);
            font-weight: var(--font-weight, 800);
            margin-bottom: 1.5rem;
            margin-top: 0;

        }

        .message-box {
            /* bg-white/10 backdrop-blur-md p-6 rounded-xl border border-white/10 mb-8 max-w-lg */
            background-color: rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            border-radius: 0.75rem; /* rounded-xl */
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 2rem;
            max-width: 32rem; /* max-w-lg */
        }

        .body-text {
            /* text-lg text-indigo-100 leading-relaxed */
            font-size: 1.125rem;
            color: #e0e7ff; /* text-indigo-100 */
            line-height: 1.625;
            margin: 0;
        }

        .stats-row {
            /* flex items-center gap-8 */
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .stat-label {
            /* text-xs text-indigo-300 uppercase font-bold mb-1 */
            font-size: 0.75rem;
            color: #a5b4fc; /* text-indigo-300 */
            text-transform: uppercase;
            font-weight: 700;
            margin-bottom: 0.25rem;
            margin-top: 0;
        }

        .stat-value {
            /* text-2xl font-bold text-white */
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
            margin: 0;
        }
        
        .stat-value-sm {
            /* text-lg font-medium text-white */
            font-size: 1.125rem;
            font-weight: 500;
            color: white;
            margin: 0;
        }

        .divider {
            /* h-8 w-px bg-indigo-700 */
            height: 2rem;
            width: 1px;
            background-color: #4338ca; /* bg-indigo-700 */
        }

    </style>
</head>
<body>
    <div class="container" style="--background-color: {{ background_style_map.get('background-color', 'transparent') }}; --background-image: {{ background_style_map.get('background-image', 'none') }}; --border: {{ background_style_map.get('border', 'none') }};">
        <div class="blur-overlay">
            <div class="blur-1"></div>
            <div class="blur-2"></div>
        </div>

        <div class="sidebar-bar">
             <div class="vertical-text">{{ custom_text.get('sidebar_text', 'ACHIEVEMENT') }}</div>
        </div>
        
        <div class="content">
             <div class="header-row">
                 <div class="logo-box">
                     {% if logo_base64 %}
                         <img src="data:image/png;base64,{{ logo_base64 }}" class="logo">
                     {% else %}
                         <span style="font-size: 1.5rem;">‚≠ê</span>
                     {% endif %}
                 </div>
                 <p class="star-text">{{ custom_text.get('title', 'Star Student Award') }}</p>
             </div>
             
             <h1 class="congrats">{{ custom_text.get('subtitle', 'Congratulations!') }}</h1>
             <h2 class="recipient" style="--color: {{ text_style_map.get('color', 'inherit') }}; --font-family: {{ text_style_map.get('font-family', 'inherit') }}; --font-size: {{ text_style_map.get('font-size', 'inherit') }}; --font-weight: {{ text_style_map.get('font-weight', 'inherit') }};">{{ recipient_name }}</h2>
             
             <div class="message-box">
            <p class="body-text" style="margin-bottom: 1rem;">
                {{ custom_text.get('body', 'has successfully completed') }} 
                <strong style="color: white;">{{ course_title }}</strong>.
                <br>{{ custom_text.get('footer_msg', 'Your hard work has truly shone through!') }}
            </p>

            {% if extra_fields %}
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; border-top: 1px solid rgba(255, 255, 255, 0.1); padding-top: 1rem;">
                 {% for key, value in extra_fields.items() %}
                    {% if key != 'amount' %}
                    <div>
                        <p style="font-size: 0.75rem; color: #a5b4fc; text-transform: uppercase; font-weight: 700; margin-bottom: 0.25rem; margin-top: 0;">{{ key }}</p>
                        <p style="font-size: 0.875rem; font-weight: 600; color: white; margin: 0;">{{ value }}</p>
                    </div>
                    {% endif %}
                {% endfor %}
            </div>
            {% endif %}
        </div>
             
             <div class="stats-row">
                 <div>
                     <p class="stat-label">{{ custom_text.get('stat1_label', 'Total Points') }}</p>
                     <p class="stat-value">{{ custom_text.get('stat1_value', '2,500 XP') }}</p>
                 </div>
                 
                 <div class="divider"></div>
                 
                 <div>
                     <p class="stat-label">{{ custom_text.get('stat2_label', 'Rank') }}</p>
                     <p class="stat-value">{{ custom_text.get('stat2_value', '#1') }}</p>
                 </div>
                 
                 <div class="divider"></div>
                 
                 <div>
                     <p class="stat-label">{{ custom_text.get('date_label', 'Date') }}</p>
                     <p class="stat-value-sm">{{ issue_date }}</p>
                 </div>
             </div>
        </div>
    </div>
</body>
</html>
